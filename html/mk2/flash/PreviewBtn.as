package {	import flash.display.*; 	import flash.events.MouseEvent;	import flash.MovieClip;	import flash.net.URLRequest;	import flash.net.URLLoader;		import flash.media.SoundChannel;	import flash.media.Sound;	import flash.text.TextField;		public class PreviewBtn extends MovieClip {		var channel:SoundChannel = new SoundChannel();				public function newBtn(fileMC, Mp3, name, top_position) { 						//name of the audio clip 			var nameTextField:TextField  = new TextField();			nameTextField.text = name;			nameTextField.x = 60;			nameTextField.y = top_position;						fileMC.addChild(nameTextField);				var transportMC:MovieClip  = new MovieClip();			var playBtn:Loader = new Loader();			playBtn.load(new URLRequest("http://riff.jimmytidey.co.uk/mk2/images/control_play.png"));			var stopBtn:Loader = new Loader();			stopBtn.load(new URLRequest("http://riff.jimmytidey.co.uk/mk2/images/control_stop.png"));						transportStatus = "playing";			transportMC.y = top_position;			trace(top_position);			transportMC.addChild(playBtn);			transportMC.addEventListener(MouseEvent.CLICK, changeState);						function changeState(obj:Object) {				if (transportStatus == "playing"){ 					while(transportMC.numChildren){						transportMC.removeChildAt(0);					}					transportMC.addChild(stopBtn);					transportStatus = "stopped";					channel = Mp3.play(0,100);				}				else { 					while(transportMC.numChildren){						transportMC.removeChildAt(0);					}					transportMC.addChild(playBtn);					transportStatus = "playing";					channel.stop();									}			}						fileMC.addChild(transportMC); 		}				public function refreshBtn(fileMC,Mp3,soundURL) {			var refreshBtn:Loader = new Loader();			refreshBtn.load(new URLRequest("http://riff.jimmytidey.co.uk/mk2/images/arrow_refresh.png"));			refreshBtn.x = 45;			refreshBtn.addEventListener(MouseEvent.CLICK, refreshSound);						function refreshSound(obj:Object) {				Mp3.close();				Mp3 = new Sound();				Mp3.load(new URLRequest(soundURL));			}						fileMC.addChild(refreshBtn);		}	}}