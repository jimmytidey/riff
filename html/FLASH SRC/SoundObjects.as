package {	import flash.net.URLRequest;	import flash.net.URLLoader;	import flash.events.*;	import flash.utils.*;	import flash.display.*; 	import flash.utils.describeType;	import flash.text.TextField;	import flash.text.TextFormat;	import flash.text.Font;	import flash.text.AntiAliasType;			public class SoundObjects extends MovieClip {			public function make(jsonData, _stage, totalPercentageMC) {						total_number_of_sounds = jsonData['banks'].length;			sounds = new Array(total_number_of_sounds); 			var totalPercentageText:TextField  = new TextField();			totalPercentageMC.addChild(totalPercentageText);						var totalBytes:Number = 0;			var loadedBytes:Number = 0;			var loadPercent:Number = 0;						function totalUploadPercent(event:ProgressEvent) {				for (bank in sounds) {					for (bank_option in sounds[bank]) {												if(!isNaN(sounds[bank][bank_option]['totalBytes'])) {							totalBytes 	+=  sounds[bank][bank_option]['totalBytes'];						}														if (!isNaN(sounds[bank][bank_option]['loadedBytes'])) {							loadedBytes += sounds[bank][bank_option]['loadedBytes'];						}					}									}												var loadTime:Number = loadedBytes / totalBytes;							LoadPercent = Math.ceil(110 * loadTime)				if (LoadPercent > 100) {LoadPercent =100};								var myFont = new Helvetica();				var format:TextFormat	= new TextFormat();				format.font		      	= "Helvetica";				format.color            = 0x000;				format.size             = 20;								totalPercentageText.defaultTextFormat = format;				totalPercentageText.text = LoadPercent + "%";				totalPercentageText.x = 10;				totalPercentageText.y = 60;				totalPercentageText.width = 200;			}			var cumulative_y_ofset:int = 67; // JIMMY changes where the lables start			var loop:String; 			var volumeLevel:Number;											for (bank_index=0; bank_index < jsonData['banks'].length; bank_index++) {									sounds[bank_index] = new Array(jsonData['banks'][bank_index]['bank_options'].length);								for (bank_option_index=0; bank_option_index < jsonData['banks'][bank_index]['bank_options'].length; bank_option_index++) {										var sound_file_location:String = "http://chance-acorn.jimmytidey.co.uk/"+jsonData['banks'][bank_index]['bank_options'][bank_option_index]['file_location'];										//if the sound needs to loop within a step, find out and build the sound object with that setting					if (jsonData['banks'][bank_index]['bank_options'][bank_option_index]['loop'] == 'true') {						loop= 'yes';					}										else {loop='no';}															volumeLevel = jsonData['banks'][bank_index]['bank_options'][bank_option_index]['volume'];										//fuck I hate flash 					//pass in an mc for the thign to report it's loadedness into 					var statusMC:MovieClip = new MovieClip();					statusMC.y = cumulative_y_ofset;					statusMC.x = 6;										_stage.addChild(statusMC);										var MySound:PlaySound = new PlaySound(sound_file_location, loop, volumeLevel, statusMC, totalUploadPercent);													sounds[bank_index][bank_option_index] = MySound;					cumulative_y_ofset  += 26;				}								cumulative_y_ofset  += 56; 			}							return sounds; 		}	}}